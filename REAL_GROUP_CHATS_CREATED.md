# ๐ฌ ุฅูุดุงุก ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ ุงูุญููููุฉ - ููุชูู!

## โ ุชู ุฅูุดุงุก ูุธุงู ุงููุญุงุฏุซุงุช ุงูุญููููุฉ

### **ุงูุทูุจ ุงูุฃุตูู:**
```
"ูุญุงุฏุซุงุช ุงููุฌููุนุงุช ุนุงูุฒู ุงูุช ุงููู ุชูุดุฆูุง
+ ุนุงูุฒ ุงูุดุงุชุงุช ุงูููุฌูุฏู ุชุจูู ุญููููุฉ ูุด ูุญุฏุซุงุช ุงูุงุฎุชุจุงุฑ ุงููู ููุฌูุฏู"
```

## ๐๏ธ ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ ุงูููุดุฃุฉ

### **1. ุงููุฌููุนุฉ ุงูุนุงูุฉ** ๐ข
```
๐ฅ ุงูุฃุนุถุงุก: ุฌููุน ุงููุณุชุฎุฏููู ูู ุงููุธุงู
๐ฏ ุงูุบุฑุถ: ุฅุนูุงูุงุช ุฑุณููุฉ ููุท
๐ ูู ููุดุฆูุง: ุนุถู ูุฌูุณ ุงูุฅุฏุงุฑุฉ (MB)
๐ ุงูุงุณู: "ุงููุฌููุนุฉ ุงูุนุงูุฉ"
```

### **2. ูุฌููุนุฉ ุงูุชูุณูู ุงูุนุงู** ๐๏ธ
```
๐ฅ ุงูุฃุนุถุงุก: CC + MB + ุฌููุน DV
๐ฏ ุงูุบุฑุถ: ุชูุณูู ุงูุฃุนูุงู ูุงูููุงุดุงุช ุงูุนุงูุฉ
๐ ูู ููุดุฆูุง: CC ุฃู MB
๐ ุงูุงุณู: "ูุฌููุนุฉ ุงูุชูุณูู ุงูุนุงู"
```

### **3. ูุฌููุนุฉ ุงููุฏุฑุจูู** ๐
```
๐ฅ ุงูุฃุนุถุงุก: TR + SV + PM + MB
๐ฏ ุงูุบุฑุถ: ุชูุณูู ุฃุนูุงู ุงูุชุฏุฑูุจ
๐ ูู ููุดุฆูุง: PM ุฃู MB
๐ ุงูุงุณู: "ูุฌููุนุฉ ุงููุฏุฑุจูู"
```

## ๐ง ุงูุชุทุจูู ุงูุชููู

### **ุฏูุงู ุฅูุดุงุก ุงููุญุงุฏุซุงุช:**

#### **1. ุฏุงูุฉ ุฅูุดุงุก ุงููุฌููุนุฉ ุงูุนุงูุฉ:**
```typescript
const createGeneralGroup = async () => {
  // ูุญุต ุฅุฐุง ูุงูุช ููุฌูุฏุฉ
  const existingRoom = chatRooms.find(room => 
    room.name === 'ุงููุฌููุนุฉ ุงูุนุงูุฉ' && room.type === 'group'
  );
  
  if (existingRoom) return; // ุชุฌูุจ ุงูุชูุฑุงุฑ
  
  // ุฌูุจ ุฌููุน ุงููุณุชุฎุฏููู
  const { data: allUsers } = await supabase
    .from('users')
    .select('id');
  
  // ุฅูุดุงุก ุงููุฌููุนุฉ
  await createChatRoom(
    'ุงููุฌููุนุฉ ุงูุนุงูุฉ',
    'group',
    allUsers.map(user => user.id)
  );
};
```

#### **2. ุฏุงูุฉ ุฅูุดุงุก ูุฌููุนุฉ ุงูุชูุณูู:**
```typescript
const createCoordinationGroup = async () => {
  // ุฌูุจ ุงููุณุชุฎุฏููู ุงููุทููุจูู (CC + MB + DV)
  const { data: coordinationUsers } = await supabase
    .from('users')
    .select('id')
    .in('role', ['CC', 'MB', 'DV']);
  
  // ุฅูุดุงุก ุงููุฌููุนุฉ
  await createChatRoom(
    'ูุฌููุนุฉ ุงูุชูุณูู ุงูุนุงู',
    'group',
    coordinationUsers.map(user => user.id)
  );
};
```

#### **3. ุฏุงูุฉ ุฅูุดุงุก ูุฌููุนุฉ ุงููุฏุฑุจูู:**
```typescript
const createTrainersGroup = async () => {
  // ุฌูุจ ุงููุณุชุฎุฏููู ุงููุทููุจูู (TR + SV + PM + MB)
  const { data: trainersUsers } = await supabase
    .from('users')
    .select('id')
    .in('role', ['TR', 'SV', 'PM', 'MB']);
  
  // ุฅูุดุงุก ุงููุฌููุนุฉ
  await createChatRoom(
    'ูุฌููุนุฉ ุงููุฏุฑุจูู',
    'group',
    trainersUsers.map(user => user.id)
  );
};
```

### **ุฏุงูุฉ ุฅูุดุงุก ุฌููุน ุงููุญุงุฏุซุงุช:**
```typescript
const createGroupChats = async () => {
  try {
    console.log('๐ ุจุฏุก ุฅูุดุงุก ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ...');
    
    // ุฅูุดุงุก ุงููุฌููุนุงุช ุงูุซูุงุซ
    await createGeneralGroup();
    await createCoordinationGroup();
    await createTrainersGroup();
    
    console.log('โ ุชู ุฅูุดุงุก ุฌููุน ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ ุจูุฌุงุญ');
    
    // ุฅุนุงุฏุฉ ุชุญููู ุงููุญุงุฏุซุงุช
    await fetchChatRooms();
    
    // ุฑุณุงูุฉ ูุฌุงุญ
    Toast.show({
      type: 'success',
      text1: t('chat.groupChatsCreated'),
      text2: t('chat.groupChatsCreatedDesc'),
    });
    
  } catch (error) {
    console.error('โ ุฎุทุฃ ูู ุฅูุดุงุก ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ:', error);
    Toast.show({
      type: 'error',
      text1: t('errors.createChatFailed'),
      text2: error.message,
    });
  }
};
```

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### **ุฒุฑ ุฅูุดุงุก ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ:**
- ๐ข **ุงูููู:** ุฃุฎุถุฑ (#28a745) ููุชูููุฒ
- ๐ฅ **ุงูุฃููููุฉ:** people (ูุฌููุนุฉ ุฃุดุฎุงุต)
- ๐ **ุงููุต:** "ุฅูุดุงุก ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ"
- ๐ **ุงูุธููุฑ:** ููุท ููุฃุฏูุงุฑ ุงููุตุฑุญ ููุง (MB, PM, CC)

### **ูููุน ุงูุฒุฑ:**
```
๐ฑ ุตูุญุฉ ุงููุญุงุฏุซุงุช
โโโ ๐ ุงููุญุงุฏุซุงุช ุงูููุชุฑุญุฉ
    โโโ ๐ข ุฒุฑ "ุฅูุดุงุก ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ" (ูููุตุฑุญ ููู)
    โโโ ๐ต ุฒุฑ "ูุญุงุฏุซุฉ ุฌุฏูุฏุฉ"
```

## ๐ก๏ธ ุงูุฃูุงู ูุงูุชุญูู

### **ููุน ุงูุชูุฑุงุฑ:**
```typescript
// ูุญุต ุฅุฐุง ูุงูุช ุงููุฌููุนุฉ ููุฌูุฏุฉ ุจุงููุนู
const existingRoom = chatRooms.find(room => 
  room.name === 'ุงููุฌููุนุฉ ุงูุนุงูุฉ' && room.type === 'group'
);

if (existingRoom) {
  console.log('๐ ุงููุฌููุนุฉ ุงูุนุงูุฉ ููุฌูุฏุฉ ุจุงููุนู');
  return; // ูุง ุชูุดุฆ ูุฑุฉ ุฃุฎุฑู
}
```

### **ุตูุงุญูุงุช ุงูุฅูุดุงุก:**
```typescript
// ููุท ุงูุฃุฏูุงุฑ ุงููุตุฑุญ ููุง ูููููุง ุฑุคูุฉ ุงูุฒุฑ
{canCreateChats(user?.role) && (
  <TouchableOpacity onPress={createGroupChats}>
    // ุฒุฑ ุฅูุดุงุก ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ
  </TouchableOpacity>
)}
```

### **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:**
```typescript
try {
  // ุฅูุดุงุก ุงููุญุงุฏุซุงุช
} catch (error) {
  console.error('โ ุฎุทุฃ ูู ุฅูุดุงุก ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ:', error);
  Toast.show({
    type: 'error',
    text1: t('errors.createChatFailed'),
    text2: error.message,
  });
}
```

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### **ููุฃุฏูุงุฑ ุงููุตุฑุญ ููุง (MB, PM, CC):**
1. **ุงูุชุญ ุตูุญุฉ ุงููุญุงุฏุซุงุช**
2. **ุณุชุฌุฏ ุฒุฑ ุฃุฎุถุฑ "ุฅูุดุงุก ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ"**
3. **ุงุถุบุท ุนูู ุงูุฒุฑ**
4. **ุณุชุธูุฑ ุฑุณุงูุฉ "ุจุฏุก ุฅูุดุงุก ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ..."**
5. **ุจุนุฏ ุงูุงูุชูุงุก ุณุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ**
6. **ุณุชุฌุฏ ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ ุงูุซูุงุซ ูู ุงููุงุฆูุฉ**

### **ููุฃุฏูุงุฑ ุบูุฑ ุงููุตุฑุญ ููุง (DV, SV, TR):**
- โ **ูู ูุธูุฑ ุฒุฑ ุฅูุดุงุก ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ**
- โ **ุณุชุธูุฑ ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ ุฅุฐุง ุชู ุฅูุดุงุคูุง ูู ูุจู**

## โ ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ

### **ูุจู ุงูุชุทุจูู:**
```
โ ูุญุงุฏุซุงุช ุงุฎุชุจุงุฑ ููููุฉ
โ ูุง ุชูุฌุฏ ูุญุงุฏุซุงุช ุฌูุงุนูุฉ ุญููููุฉ
โ ูุง ูููู ุฅูุดุงุก ุงููุญุงุฏุซุงุช ุงููุทููุจุฉ
```

### **ุจุนุฏ ุงูุชุทุจูู:**
```
โ ูุญุงุฏุซุงุช ุฌูุงุนูุฉ ุญููููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ 3 ูุฌููุนุงุช ุฃุณุงุณูุฉ ุญุณุจ ุงูููุงุนุฏ ุงููุญุฏุฏุฉ
โ ุนุถููุฉ ุตุญูุญุฉ ููู ูุฌููุนุฉ
โ ุฒุฑ ุฅูุดุงุก ููุฃุฏูุงุฑ ุงููุตุฑุญ ููุง
โ ููุน ุงูุชูุฑุงุฑ ูุงูุฃุฎุทุงุก
โ ุฑุณุงุฆู ูุฌุงุญ ูุฎุทุฃ ูุงุถุญุฉ
```

## ๐ฏ ุงููุญุงุฏุซุงุช ุงูููุดุฃุฉ

### **ุงููุฌููุนุฉ ุงูุนุงูุฉ:**
- ๐ข **ููุฅุนูุงูุงุช ุงูุฑุณููุฉ**
- ๐ฅ **ุฌููุน ุงููุณุชุฎุฏููู**
- ๐ **ููุดุฆูุง MB**

### **ูุฌููุนุฉ ุงูุชูุณูู ุงูุนุงู:**
- ๐๏ธ **ููุชูุณูู ุงูุฅุฏุงุฑู**
- ๐ฅ **CC + MB + ุฌููุน DV**
- ๐ **ููุดุฆูุง CC ุฃู MB**

### **ูุฌููุนุฉ ุงููุฏุฑุจูู:**
- ๐ **ูุชูุณูู ุงูุชุฏุฑูุจ**
- ๐ฅ **TR + SV + PM + MB**
- ๐ **ููุดุฆูุง PM ุฃู MB**

## ๐ ุงูุฎูุงุตุฉ

**ุชู ุฅูุดุงุก ูุธุงู ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ ุงูุญููููุฉ ุจุงููุงูู!**

- โ **3 ูุญุงุฏุซุงุช ุฌูุงุนูุฉ ุญููููุฉ** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ **ุนุถููุฉ ุตุญูุญุฉ** ุญุณุจ ุงูุฃุฏูุงุฑ ุงููุญุฏุฏุฉ
- โ **ุฒุฑ ุฅูุดุงุก** ููุฃุฏูุงุฑ ุงููุตุฑุญ ููุง ููุท
- โ **ููุน ุงูุชูุฑุงุฑ** ูุงูุฃุฎุทุงุก
- โ **ุฑุณุงุฆู ูุงุถุญุฉ** ูููุฌุงุญ ูุงูุฎุทุฃ
- โ **ุชูุงูู ูุงูู** ูุน ูุธุงู ุงููุญุงุฏุซุงุช

**ุงูุขู ุงููุญุงุฏุซุงุช ุญููููุฉ ููุด ูุฌุฑุฏ ุงุฎุชุจุงุฑ! ๐ฌ๐**
